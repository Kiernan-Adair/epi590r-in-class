---
title: "gtsummary in quarto"
format:
  html:
    theme: cerulean
execute: 
  echo: false
  warning: false
---
## About the NLS
The NLS, sponsored by the U.S. Bureau of Labor Statistics, are nationally representative surveys that follow the same sample of individuals from specific birth cohorts over time. The surveys collect data on labor market activity, schooling, fertility, program participation, health, and much more. Select a cohort below to explore detailed information.

```{r}


library(tidyverse)
library(gtsummary)
nlsy_cols <- c("glasses", "eyesight", "sleep_wkdy", "sleep_wknd", 
               "id", "nsibs", "samp", "race_eth", "sex", "region", 
               "income", "res_1980", "res_2002", "age_bir")
nlsy <- read_csv(here::here("data", "raw", "nlsy.csv"), 
                 na = c("-1", "-2", "-3", "-4", "-5", "-998"),
                 skip = 1, col_names = nlsy_cols) |> 
  mutate(region_cat = factor(region, labels = c("Northeast", "North Central", "South", "West")),
         sex_cat = factor(sex, labels = c("Male", "Female")),
         race_eth_cat = factor(race_eth, labels = c("Hispanic", "Black", "Non-Black, Non-Hispanic")),
         eyesight_cat = factor(eyesight, labels = c("Excellent", "Very good", "Good", "Fair", "Poor")),
         glasses_cat = factor(glasses, labels = c("No", "Yes"))) 
```

# Customization of `tbl_summary()`



```{r}
#| label: tbl-one
#| tbl-cap: descriptive statistics
tbl_summary(
  nlsy,
  by = sex_cat,
  include = c(sex_cat, race_eth_cat, region_cat,
              eyesight_cat, glasses, age_bir))
```
@tbl-one is stratified  by sex

```{r}
#| eval: false
tbl_summary(
  nlsy,
  by = sex_cat,
  include = c(sex_cat, race_eth_cat, region_cat,
              eyesight_cat, glasses, age_bir),
  label = list(
    race_eth_cat ~ "Race/ethnicity",
    region_cat ~ "Region",
    eyesight_cat ~ "Eyesight",
    glasses ~ "Wears glasses",
    age_bir ~ "Age at first birth"
  ),
  missing_text = "Missing")
```

```{r}
#| eval: false
tbl_summary(
  nlsy,
  by = sex_cat,
  include = c(sex_cat, race_eth_cat, region_cat,
              eyesight_cat, glasses, age_bir))
```

```{r}

wknd_sleep_mean <- mean(nlsy$sleep_wknd, na.rm=TRUE)
wknd_sleep_med <- median(nlsy$sleep_wknd, na.rm=TRUE)
```
On average, people got `r wknd_sleep_mean` hours of sleep on weekend nights.
The median number of hours of sleep people got on weekend nights was `r wknd_sleep_med`.

## Part 2
```{r}
#| label: tbl-descr
#| tbl-cap: "Descriptive statistics"
#| output-location: slide
table1 <- tbl_summary(
  nlsy,
  by = sex_cat,
  include = c(sex_cat, race_eth_cat, region_cat,
              eyesight_cat, glasses, age_bir, sleep_wknd)) |> 
  add_overall(last = TRUE)
table1


wknd_sleep_inline <- inline_text(table1, variable= "sleep_wknd", column="stat_0",
						pattern="{median}")
```

The median number of hours of sleep people got on weekend night was `r wknd_sleep_inline`.
